webpackJsonp([12],{G3mu:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("//Fk"),l=t.n(a),s=t("WOcw"),o={data:function(){return{ruleForm:{place:1,status:1,order:1,name:"",address:"",web:1},rules:{place:[{required:!0,message:"请选择图片位置",trigger:"change"}],status:[{required:!0,message:"请选择图片分类",trigger:"change"}],order:[{required:!0,message:"请输入图片权重",trigger:"blur"},{type:"number",message:"权重必须为数字值",trigger:"blur"}],name:[{required:!0,message:"请输入图片名称",trigger:"blur"}],address:[{required:!0,message:"请填写图片跳转地址",trigger:"blur"}],web:[{required:!0,message:"请输入图片网站排序",trigger:"change"}]},fileList:[],imageId:0}},mounted:function(){parseInt(this.$route.query.imageId)&&(this.imageId=parseInt(this.$route.query.imageId),this.getImageInfo())},methods:{getImageInfo:function(){var e=this,r=this,t={image_id:parseInt(this.$route.query.imageId)};Object(s.F)(t).then(function(t){200===t.code?(r.ruleForm.place=t.data.image_place,r.ruleForm.order=t.data.order,r.ruleForm.web=t.data.web_order,r.ruleForm.name=t.data.image_name,r.ruleForm.address=t.data.jump_url,r.ruleForm.status=t.data.is_show,r.ruleForm.file=t.data.image,r.fileList=[{name:t.data.image_name,url:t.data.image}]):1e3===t.code&&e.$router.push({path:"/admin/login"})})},upload:function(e){var r=this;e.file.size/1024>500?this.$message.error("图片大小不能超过500kb"):new l.a(function(t,a){var l=new FileReader;l.readAsDataURL(e.file),l.onload=function(){r.ruleForm.file=l.result},l.onerror=function(e){a(e)},l.onloadend=function(){t(r.ruleForm.file)}})},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;var t={image_id:parseInt(r.$route.query.imageId),image_place:r.ruleForm.place,status:r.ruleForm.status,order:r.ruleForm.order,image:r.ruleForm.file,image_name:r.ruleForm.name,jump_url:r.ruleForm.address,web_order:r.ruleForm.web};parseInt(r.$route.query.imageId)?Object(s.H)(t).then(function(e){200===e.code?(r.$message.success(e.message),r.$router.go(-1)):1e3===e.code?r.$router.push({path:"/admin/login"}):r.$message.error(e.message)}):0!==r.ruleForm.file.length?Object(s.D)(t).then(function(e){200===e.code?(r.$message.success(e.message),r.$router.go(-1)):1e3===e.code?r.$router.push({path:"/admin/login"}):r.$message.error(e.message)}):r.$message.error("请上传图片，以及图片大小不能超过500kb")})},resetForm:function(e){this.$refs[e].resetFields()}}},i={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"create"},[t("router-link",{staticClass:"link",attrs:{to:"/admin"}},[e._v("＜返回")]),e._v(" "),t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"图片位置",prop:"place"}},[t("el-select",{staticStyle:{width:"320px"},model:{value:e.ruleForm.place,callback:function(r){e.$set(e.ruleForm,"place",r)},expression:"ruleForm.place"}},[t("el-option",{attrs:{label:"首页一号位",value:1}}),e._v(" "),t("el-option",{attrs:{label:"首页轮播图",value:2}}),e._v(" "),t("el-option",{attrs:{label:"首页三号位",value:3}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"上架状态",prop:"status"}},[t("el-select",{staticStyle:{width:"320px"},model:{value:e.ruleForm.status,callback:function(r){e.$set(e.ruleForm,"status",r)},expression:"ruleForm.status"}},[t("el-option",{attrs:{label:"上架",value:1}}),e._v(" "),t("el-option",{attrs:{label:"下架",value:2}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"权重",prop:"order"}},[t("el-input",{staticStyle:{width:"320px"},attrs:{type:"number"},model:{value:e.ruleForm.order,callback:function(r){e.$set(e.ruleForm,"order",e._n(r))},expression:"ruleForm.order"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"图片名称",prop:"name"}},[t("el-input",{staticStyle:{width:"320px"},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"图片跳转地址",prop:"address"}},[t("el-input",{staticStyle:{width:"320px"},model:{value:e.ruleForm.address,callback:function(r){e.$set(e.ruleForm,"address",r)},expression:"ruleForm.address"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"网站排序",prop:"web"}},[t("el-select",{staticStyle:{width:"320px"},model:{value:e.ruleForm.web,callback:function(r){e.$set(e.ruleForm,"web",r)},expression:"ruleForm.web"}},[t("el-option",{attrs:{label:"cn",value:1}}),e._v(" "),t("el-option",{attrs:{label:"com",value:2}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"图片文件",prop:"file"}},[t("el-upload",{staticStyle:{width:"320px"},attrs:{action:"#",limit:1,"file-list":e.fileList,"http-request":e.upload,"list-type":"picture"},scopedSlots:e._u([{key:"tip",fn:function(){return[t("div",{staticClass:"el-upload__tip"},[e._v("尺寸：1920*300，jpg/png 文件，不超过 500kb")])]},proxy:!0}])},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v(e._s(e.imageId?"立即更新":"立即创建"))]),e._v(" "),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var u=t("VU/8")(o,i,!1,function(e){t("TPEA")},"data-v-26bb0e84",null);r.default=u.exports},TPEA:function(e,r){}});
//# sourceMappingURL=12.1b20e005529f24af262e.js.map